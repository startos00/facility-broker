# Feature Requirement Document: Urban Dashboard Platform

**Feature Name:** Urban Dashboard - Urban Planning Analytics Platform  
**Status:** Draft  
**Created:** 2026-02-14  
**Based on:** [Urban Dashboard](https://www.urban-dashboard.info/en)

---

## Goal

Transform the existing CloudtoTerra geospatial platform into an **Urban Planning Intelligence System** that enables architects, planners, developers, and municipalities to:

1. Draw parametric building/area plans directly on the map
2. Instantly calculate density, areas, unit mix, and economic feasibility
3. Visualize plans in dynamic 3D models
4. Compare multiple planning alternatives side-by-side
5. Access comprehensive GIS layers (zoning, infrastructure, master plans)
6. Collaborate with stakeholders on planning decisions

**Why:** Traditional urban planning is slow, expensive, and relies on manual calculations. Urban Dashboard provides real-time metrics that accelerate decision-making from weeks to minutes.

---

## User Story

**As a** real estate developer/urban planner/architect,  
**I want to** draw a building plan on a map and instantly see density calculations, unit mix, economic feasibility, and 3D visualization,  
**So that I can** make fast, informed decisions about project viability before investing in detailed architectural plans.

---

## Functional Requirements

### Phase 1: Core Planning Engine

#### 1.1 Parametric Drawing Tools
- [ ] Draw building footprints (polygons) on the map
- [ ] Draw plot/parcel boundaries
- [ ] Specify number of floors per building
- [ ] Set floor-to-floor heights
- [ ] Define ground floor usage (retail, lobby, parking)
- [ ] Auto-snap to existing parcel boundaries (when available)

#### 1.2 Instant Area Calculations
- [ ] Plot area (total land area)
- [ ] Building footprint area
- [ ] Gross Floor Area (GFA) = footprint Ã— floors
- [ ] Net Floor Area (NFA) = GFA Ã— efficiency ratio
- [ ] Floor Area Ratio (FAR) = GFA / Plot area
- [ ] Site Coverage % = footprint / plot area
- [ ] Open Space % = (plot - footprint) / plot

#### 1.3 Unit Mix Generator
- [ ] Define unit types (studio, 1BR, 2BR, 3BR, penthouse)
- [ ] Set average unit sizes per type
- [ ] Auto-calculate number of units per floor
- [ ] Total unit count by type
- [ ] Parking ratio calculator (units Ã— parking ratio)

#### 1.4 Density Metrics
- [ ] Dwelling Units per Acre (DU/acre)
- [ ] Population estimate (units Ã— avg household size)
- [ ] Built-up density visualization (heat map)

### Phase 2: Economic Feasibility Module

#### 2.1 Construction Cost Estimator
- [ ] Cost per sqm input (by building type)
- [ ] Total construction cost = GFA Ã— cost/sqm
- [ ] Soft costs % (design, permits, financing)
- [ ] Land cost input
- [ ] Total Development Cost (TDC)

#### 2.2 Revenue Projections
- [ ] Sale price per sqm (by unit type)
- [ ] Total Gross Development Value (GDV)
- [ ] Profit margin % = (GDV - TDC) / GDV
- [ ] Return on Investment (ROI)

#### 2.3 Pro Forma Summary
- [ ] One-page economic summary dashboard
- [ ] Export to PDF/Excel

### Phase 3: 3D Visualization

#### 3.1 Parametric 3D Model
- [ ] Auto-generate 3D massing from drawn footprints
- [ ] Extrude buildings by number of floors
- [ ] Basic texturing (glass, concrete, residential)
- [ ] Shadow analysis (sun position by time/date)
- [ ] Street-level camera view

#### 3.2 Context Buildings
- [ ] Import/display existing building heights
- [ ] Show proposed vs. existing context
- [ ] Skyline impact visualization

### Phase 4: GIS Layers & Data

#### 4.1 Base Layers
- [ ] Parcel boundaries (cadastral data)
- [ ] Zoning maps with permitted FAR/height limits
- [ ] Road classifications
- [ ] Transit routes and stations
- [ ] Topography/elevation

#### 4.2 Infrastructure Layers
- [ ] Water/sewer networks
- [ ] Power grid
- [ ] Flood zones
- [ ] Environmental constraints

#### 4.3 Planning Layers
- [ ] Master plan boundaries
- [ ] Development zones
- [ ] Heritage/conservation areas
- [ ] Approved projects

### Phase 5: Comparison & Collaboration

#### 5.1 Alternative Scenarios
- [ ] Save multiple plan alternatives
- [ ] Side-by-side comparison view
- [ ] Metrics comparison table
- [ ] Preferred alternative selection

#### 5.2 Collaboration
- [ ] Share project link (view-only)
- [ ] Comment/annotation on plans
- [ ] Version history
- [ ] Export presentation deck

---

## Data Requirements

### New Database Tables

```sql
-- Projects table
CREATE TABLE projects (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(255) NOT NULL,
    description TEXT,
    location GEOMETRY(Point, 4326),
    boundary GEOMETRY(Polygon, 4326),
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Plan alternatives within a project
CREATE TABLE plan_alternatives (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID REFERENCES projects(id) ON DELETE CASCADE,
    name VARCHAR(100) NOT NULL,
    is_preferred BOOLEAN DEFAULT FALSE,
    settings JSONB, -- floor heights, efficiency ratios, etc.
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Buildings within an alternative
CREATE TABLE plan_buildings (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    alternative_id UUID REFERENCES plan_alternatives(id) ON DELETE CASCADE,
    footprint GEOMETRY(Polygon, 4326) NOT NULL,
    floors INTEGER NOT NULL DEFAULT 1,
    floor_height DECIMAL(4,2) DEFAULT 3.0,
    ground_floor_use VARCHAR(50), -- retail, parking, lobby
    building_type VARCHAR(50), -- residential, commercial, mixed
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Unit mix configuration
CREATE TABLE unit_types (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    alternative_id UUID REFERENCES plan_alternatives(id) ON DELETE CASCADE,
    name VARCHAR(50) NOT NULL, -- Studio, 1BR, 2BR, etc.
    avg_size_sqm DECIMAL(8,2) NOT NULL,
    count INTEGER DEFAULT 0,
    price_per_sqm DECIMAL(12,2)
);

-- Economic assumptions per alternative
CREATE TABLE economic_assumptions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    alternative_id UUID REFERENCES plan_alternatives(id) ON DELETE CASCADE,
    construction_cost_sqm DECIMAL(12,2),
    soft_cost_pct DECIMAL(5,2) DEFAULT 15.0,
    land_cost DECIMAL(15,2),
    parking_ratio DECIMAL(4,2) DEFAULT 1.0,
    efficiency_ratio DECIMAL(4,2) DEFAULT 0.80
);

-- GIS layers metadata
CREATE TABLE gis_layers (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(100) NOT NULL,
    category VARCHAR(50), -- zoning, infrastructure, planning
    source_url TEXT,
    source_type VARCHAR(20), -- vector, raster, wms
    style JSONB,
    is_active BOOLEAN DEFAULT TRUE
);
```

---

## User Flow

### Flow 1: Create New Project

1. User clicks "New Project" button
2. User draws project boundary on map (or enters address)
3. System loads available GIS layers for that area
4. User names the project
5. System creates first "Alternative A" automatically

### Flow 2: Design a Plan

1. User selects drawing tool (Building / Parcel)
2. User draws building footprints on map
3. For each building, user sets:
   - Number of floors (slider or input)
   - Building type (residential/commercial/mixed)
   - Ground floor use
4. Analytics panel updates in real-time showing:
   - Total GFA
   - FAR
   - Unit count
   - Estimated cost

### Flow 3: Economic Analysis

1. User opens "Feasibility" panel
2. User enters market assumptions:
   - Construction cost/sqm
   - Sale price/sqm
   - Land cost
3. System calculates:
   - Total Development Cost
   - Gross Development Value
   - Profit margin
   - ROI

### Flow 4: Compare Alternatives

1. User duplicates current alternative as "Alternative B"
2. User modifies design (more floors, different mix)
3. User opens "Compare" view
4. System shows side-by-side metrics table
5. User selects preferred alternative

---

## Acceptance Criteria

### MVP Acceptance (Phase 1)

- [ ] User can draw building footprint polygons on map
- [ ] User can set floor count per building (1-100)
- [ ] System calculates and displays: footprint area, GFA, FAR
- [ ] Calculations update in real-time (<100ms)
- [ ] User can save and load projects
- [ ] UI works on desktop (tablet/mobile stretch goal)

### Full Product Acceptance

- [ ] All Phase 1-3 features complete
- [ ] Unit mix generator produces accurate counts
- [ ] Economic calculations match manual verification Â±1%
- [ ] 3D view renders buildings with correct heights
- [ ] At least 3 GIS layers available (parcels, zoning, transit)
- [ ] Alternative comparison works for 2+ alternatives
- [ ] Export to PDF generates professional summary

---

## Edge Cases

1. **Overlapping buildings** â€” Warn user, don't allow overlapping footprints
2. **Building outside project boundary** â€” Warn but allow (for context buildings)
3. **Zero floors** â€” Minimum 1 floor enforced
4. **Extremely large projects** â€” Limit to 1000 buildings per alternative
5. **Missing GIS data** â€” Gracefully handle areas without zoning/parcel data
6. **Very small parcels** â€” Warn if building footprint > 100% of parcel
7. **Currency/units** â€” Support metric (sqm) and imperial (sqft) toggle

---

## Non-Functional Requirements

### Performance
- Map interactions < 16ms (60fps)
- Area calculations < 100ms
- 3D render < 2 seconds for 50 buildings
- Project save/load < 1 second

### Design
- Dark mode default (matching CloudtoTerra aesthetic)
- Light "Blueprint" mode for presentations
- Professional, minimal UI â€” not consumer-friendly, planner-focused
- Data-dense panels with clear hierarchy

### Technical
- PostGIS for all spatial calculations
- Mapbox GL JS for 2D map
- Three.js or Mapbox 3D for visualization
- Real-time collaboration via WebSockets (Phase 5)

---

## UI Wireframe Concept

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  URBAN DASHBOARD                    [Project: Downtown Reno]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ TOOLS    â”‚                                   â”‚ ANALYTICS   â”‚ â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚ â–£ Select â”‚                                   â”‚ Plot Area   â”‚ â”‚
â”‚  â”‚ â–¢ Buildingâ”‚         MAP / 3D VIEW           â”‚ 12,500 sqm  â”‚ â”‚
â”‚  â”‚ â–­ Parcel â”‚                                   â”‚             â”‚ â”‚
â”‚  â”‚ ðŸ“ Measureâ”‚                                   â”‚ Total GFA   â”‚ â”‚
â”‚  â”‚          â”‚                                   â”‚ 45,200 sqm  â”‚ â”‚
â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                                   â”‚             â”‚ â”‚
â”‚  â”‚ LAYERS   â”‚                                   â”‚ FAR         â”‚ â”‚
â”‚  â”‚ â˜‘ Parcelsâ”‚                                   â”‚ 3.62        â”‚ â”‚
â”‚  â”‚ â˜‘ Zoning â”‚                                   â”‚             â”‚ â”‚
â”‚  â”‚ â˜ Transitâ”‚                                   â”‚ Units       â”‚ â”‚
â”‚  â”‚ â˜ Topo   â”‚                                   â”‚ 380         â”‚ â”‚
â”‚  â”‚          â”‚                                   â”‚             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚ Est. Cost   â”‚ â”‚
â”‚                                                 â”‚ $42.5M      â”‚ â”‚
â”‚                                                 â”‚             â”‚ â”‚
â”‚                                                 â”‚ [Feasibility]â”‚ â”‚
â”‚                                                 â”‚ [Compare]   â”‚ â”‚
â”‚                                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Alt A â—] [Alt B â—‹] [+ New]           [2D] [3D]    [Export]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Implementation Phases

| Phase | Features | Effort | Priority |
|-------|----------|--------|----------|
| **1** | Drawing tools, area calculations, project CRUD | 2-3 weeks | P0 |
| **2** | Unit mix, economic feasibility | 1-2 weeks | P1 |
| **3** | 3D visualization | 2-3 weeks | P1 |
| **4** | GIS layer integration | 1-2 weeks | P2 |
| **5** | Comparison & collaboration | 2 weeks | P2 |

**Total estimated effort:** 8-12 weeks for full product

---

## Open Questions

1. **Target market** â€” General platform or specific region (Israel-focused like original)?
2. **Data sources** â€” Where to get parcel/zoning data? (US: county assessors, OpenStreetMap)
3. **Monetization** â€” Free tier + Pro? Per-project pricing?
4. **Existing CloudtoTerra** â€” Replace entirely or add as separate module?
5. **3D library** â€” Mapbox 3D terrain vs. Three.js custom?

---

## References

- [Urban Dashboard](https://www.urban-dashboard.info/en) â€” Primary inspiration
- [Delve by Sidewalk Labs](https://www.sidewalklabs.com/products/delve) â€” Generative design for real estate
- [Esri Urban](https://www.esri.com/en-us/arcgis/products/arcgis-urban) â€” Enterprise urban planning GIS
- [Remix](https://www.remix.com/) â€” Transit & street planning
